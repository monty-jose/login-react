{"ast":null,"code":"import _toConsumableArray from \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Grupo Slost\\\\Walle\\\\walle-front\\\\src\\\\components\\\\private\\\\users\\\\UsersIndex.js\";\nimport React from 'react';\nimport UsersTable from './UsersTable';\nimport UsersService from './services/UsersService';\nimport { toast } from 'react-toastify';\nimport UsersFormCreate from './UsersFormCreate';\nimport './styles/Users.css';\nimport UsersChart from './UsersChart';\nimport AuthenticationService from '../../../auth/services/AuthenticationService';\n\nvar UsersIndex = /*#__PURE__*/function (_React$Component) {\n  _inherits(UsersIndex, _React$Component);\n\n  function UsersIndex() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UsersIndex);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UsersIndex)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      users: []\n    };\n\n    _this.handleLogout = function () {\n      AuthenticationService.logout().then(function () {\n        //una vez eliminado el session storage redirijimos al login\n        _this.props.history.push('/login');\n      });\n    };\n\n    _this.removeUserFromCurrentState = function (userToDelete) {\n      console.log('userToDelete', userToDelete);\n\n      _this.setState(function (prevState) {\n        return {\n          users: prevState.users.filter(function (user) {\n            return user.id !== userToDelete.id;\n          })\n        };\n      });\n    };\n\n    _this.updateUserFromCurrentState = function (userToUpdate) {\n      console.log('userToDelete', userToUpdate);\n\n      _this.setState(function (prevState) {\n        // Find the user\n        var indexToUpdate = prevState.users.findIndex(function (user) {\n          return user.id === userToUpdate.id;\n        }); // Modify the user\n\n        prevState.users[indexToUpdate].status = userToUpdate.status; // Return a new array with modified user\n\n        return {\n          users: _toConsumableArray(prevState.users)\n        };\n      });\n    };\n\n    _this.handleOnCreateUser = function (user) {\n      _this.setState(function (prevState) {\n        return {\n          users: [].concat(_toConsumableArray(prevState.users), [user])\n        };\n      });\n    };\n\n    _this.handleClickUpdateUserStatus = function (user) {\n      UsersService.updateUserStatus(user).then(function (response) {\n        var user = response.data;\n        var name = user.name,\n            email = user.email;\n        toast.success(\"User updated: \".concat(name, \" (\").concat(email, \")\"));\n\n        _this.updateUserFromCurrentState(user);\n      });\n    };\n\n    _this.handleClickDeleteUser = function (user) {\n      UsersService.deleteUser(user).then(function (response) {\n        var user = response.data;\n        var name = user.name,\n            email = user.email;\n        toast.success(\"User deleted: \".concat(name, \" (\").concat(email, \")\")); // Delete user from current state\n\n        _this.removeUserFromCurrentState(user);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UsersIndex, [{\n    key: \"render\",\n    value: function render() {\n      var users = this.state.users;\n      var numberOfActiveUsers = users.filter(function (user) {\n        return user.status === 'ACTIVE';\n      }).length;\n      var numberOfInactiveUsers = users.length - numberOfActiveUsers;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"b-content container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"b-users\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: this.handleLogout,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 15\n        }\n      }, \"Cerrar Sesi\\xF3n\", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-sign-out-alt\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 30\n        }\n      }))), /*#__PURE__*/React.createElement(UsersTable, {\n        users: users,\n        onDeleteUser: this.handleClickDeleteUser,\n        onUpdateUserStatus: this.handleClickUpdateUserStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-12 col-sm-8 col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(UsersFormCreate, {\n        onCreateUser: this.handleOnCreateUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-12 col-sm-4 col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(UsersChart, {\n        numberOfActiveUsers: numberOfActiveUsers,\n        numberOfInactiveUsers: numberOfInactiveUsers,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 17\n        }\n      })))));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      UsersService.getAllUsers().then(function (response) {\n        _this2.setState({\n          users: response.data\n        });\n      });\n    }\n  }]);\n\n  return UsersIndex;\n}(React.Component);\n\nexport default UsersIndex;","map":{"version":3,"sources":["D:/Grupo Slost/Walle/walle-front/src/components/private/users/UsersIndex.js"],"names":["React","UsersTable","UsersService","toast","UsersFormCreate","UsersChart","AuthenticationService","UsersIndex","state","users","handleLogout","logout","then","props","history","push","removeUserFromCurrentState","userToDelete","console","log","setState","prevState","filter","user","id","updateUserFromCurrentState","userToUpdate","indexToUpdate","findIndex","status","handleOnCreateUser","handleClickUpdateUserStatus","updateUserStatus","response","data","name","email","success","handleClickDeleteUser","deleteUser","numberOfActiveUsers","length","numberOfInactiveUsers","getAllUsers","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport UsersTable from './UsersTable';\nimport UsersService from './services/UsersService';\nimport {toast} from 'react-toastify';\nimport UsersFormCreate from './UsersFormCreate';\nimport './styles/Users.css';\nimport UsersChart from './UsersChart';\nimport AuthenticationService from '../../../auth/services/AuthenticationService';\n\nclass UsersIndex extends React.Component {\n\n  state = {users: []};\n  handleLogout = () => {\n    AuthenticationService.logout().then(() => {\n      //una vez eliminado el session storage redirijimos al login\n      this.props.history.push('/login');\n    });\n  };\n  render() {\n\n    const {users} = this.state;\n\n    const numberOfActiveUsers = users.filter(\n        user => user.status === 'ACTIVE').length;\n    const numberOfInactiveUsers = users.length - numberOfActiveUsers;\n\n    return (\n        <div className=\"b-content container\">\n          <div className=\"b-users\">\n            <div align='right'>\n              <button className=\"btn btn-danger\"\n                      onClick={this.handleLogout}>                \n                Cerrar Sesión<i className=\"fas fa-sign-out-alt\"></i>\n              </button>\n            </div>\n            \n\n            <UsersTable users={users} onDeleteUser={this.handleClickDeleteUser}\n                        onUpdateUserStatus={this.handleClickUpdateUserStatus}/>\n\n            <div className=\"row\">\n              <div className=\"col-12 col-sm-8 col-md-6\">\n                <UsersFormCreate onCreateUser={this.handleOnCreateUser}/>\n              </div>\n              <div className=\"col-12 col-sm-4 col-md-6\">\n                <UsersChart numberOfActiveUsers={numberOfActiveUsers}\n                            numberOfInactiveUsers={numberOfInactiveUsers}/>\n              </div>\n            </div>\n\n          </div>\n        </div>\n    );\n  }\n\n  componentDidMount() {\n    UsersService.getAllUsers().then((response) => {\n      this.setState({users: response.data});\n    });\n  }\n\n  removeUserFromCurrentState = (userToDelete) => {\n\n    console.log('userToDelete', userToDelete);\n    this.setState(\n        prevState => ({\n          users: prevState.users.filter(\n              user => user.id !== userToDelete.id),\n        }));\n  };\n\n  updateUserFromCurrentState = (userToUpdate) => {\n\n    console.log('userToDelete', userToUpdate);\n    this.setState(\n        prevState => {\n          // Find the user\n          const indexToUpdate = prevState.users.findIndex(\n              user => user.id === userToUpdate.id);\n\n          // Modify the user\n          prevState.users[indexToUpdate].status = userToUpdate.status;\n\n          // Return a new array with modified user\n          return {\n            users: [...prevState.users],\n          };\n\n        });\n  };\n\n  handleOnCreateUser = (user) => {\n    this.setState(prevState => ({\n      users: [...prevState.users, user],\n    }));\n  };\n\n  handleClickUpdateUserStatus = (user) => {\n    UsersService.updateUserStatus(user).then((response) => {\n      const user = response.data;\n      const {name, email} = user;\n      toast.success(`User updated: ${name} (${email})`);\n      this.updateUserFromCurrentState(user);\n    });\n  };\n\n  handleClickDeleteUser = (user) => {\n\n    UsersService.deleteUser(user).then((response) => {\n      const user = response.data;\n      const {name, email} = user;\n      toast.success(`User deleted: ${name} (${email})`);\n\n      // Delete user from current state\n      this.removeUserFromCurrentState(user);\n    });\n  };\n}\n\nexport default UsersIndex;\n"]},"metadata":{},"sourceType":"module"}